# * Xbar-R chart ------------------------------------------------------------------------
Chart_type <- "Xbar-R"
data <- data_demo[[Chart_type]]$data %>% arrange(DTime)
iu <- data_demo[[Chart_type]]$iu
pCtrl <- data_demo[[Chart_type]]$pCtrl
pCtrl
names(data_demo)
x <- names(pCtrl)
x
x[x == c("Chart_CLx", "Chart_CLr")]
x[x %in% c("Chart_CLx", "Chart_CLr")]
[x %in% c("Chart_CLx", "Chart_CLr")]
x %in% c("Chart_CLx", "Chart_CLr")
x[x == "Chart_CLx"] <- "CLx"
x <- names(pCtrl)
x[x == "Chart_CLx"] <- "CLx"
x[x == "Chart_UCLx"] <- "UCLx"
x[x == "Chart_LCLx"] <- "LCLx"
x[x == "Chart_CLr"] <- "CLr"
x[x == "Chart_UCLr"] <- "UCLr"
x[x == "Chart_LCLr"] <- "LCLr"
x[x == "Chart_UCLmr"] <- "UCLmr"
x[x == "Chart_LCLmr"] <- "LCLmr"
x
x[x == "Chart_CLmr"] <- "CLmr"
x
nams(pCtrl) <- x
names(pCtrl) <- x
names
pCtrl
data_demo[[Chart_type]]$pCtrl <- pCtrl
Chart_type <- "bar-mR-R"
data <- data_demo[[Chart_type]]$data %>% arrange(DTime)
iu <- data_demo[[Chart_type]]$iu
pCtrl <- data_demo[[Chart_type]]$pCtrl
x <- names(pCtrl)
x[x == "Chart_CLx"] <- "CLx"
x[x == "Chart_UCLx"] <- "UCLx"
x[x == "Chart_LCLx"] <- "LCLx"
x[x == "Chart_CLr"] <- "CLr"
x[x == "Chart_UCLr"] <- "UCLr"
x[x == "Chart_LCLr"] <- "LCLr"
x[x == "Chart_CLmr"] <- "CLmr"
x[x == "Chart_UCLmr"] <- "UCLmr"
x[x == "Chart_LCLmr"] <- "LCLmr"
names(pCtrl) <- x
data_demo[[Chart_type]]$pCtrl <- pCtrl
# * Xbar-R chart ------------------------------------------------------------------------
Chart_type <- "bar-mR-R"
data <- data_demo[[Chart_type]]$data %>% arrange(DTime)
# * Xbar-R chart ------------------------------------------------------------------------
Chart_type <- "bar-mR-R"
pCtrl <- data_demo[[Chart_type]]$pCtrl
x <- names(pCtrl)
x[x == "Chart_CLx"] <- "CLx"
x[x == "Chart_UCLx"] <- "UCLx"
x[x == "Chart_LCLx"] <- "LCLx"
x[x == "Chart_CLr"] <- "CLr"
x[x == "Chart_UCLr"] <- "UCLr"
x[x == "Chart_LCLr"] <- "LCLr"
x[x == "Chart_CLmr"] <- "CLmr"
x[x == "Chart_UCLmr"] <- "UCLmr"
x[x == "Chart_LCLmr"] <- "LCLmr"
names(pCtrl) <- x
pCtrl
# * Xbar-R chart ------------------------------------------------------------------------
Chart_type <- "Xbar-mR-R"
pCtrl <- data_demo[[Chart_type]]$pCtrl
x <- names(pCtrl)
x[x == "Chart_CLx"] <- "CLx"
x[x == "Chart_UCLx"] <- "UCLx"
x[x == "Chart_LCLx"] <- "LCLx"
x[x == "Chart_CLr"] <- "CLr"
x[x == "Chart_UCLr"] <- "UCLr"
x[x == "Chart_LCLr"] <- "LCLr"
x[x == "Chart_CLmr"] <- "CLmr"
x[x == "Chart_UCLmr"] <- "UCLmr"
x[x == "Chart_LCLmr"] <- "LCLmr"
pCtrl
data_demo[[Chart_type]]$pCtrl <- pCtrl
# * Xbar-R chart ------------------------------------------------------------------------
Chart_type <- "p"
pCtrl <- data_demo[[Chart_type]]$pCtrl
x <- names(pCtrl)
x[x == "Chart_CLx"] <- "CLx"
x[x == "Chart_UCLx"] <- "UCLx"
x[x == "Chart_LCLx"] <- "LCLx"
x[x == "Chart_CLr"] <- "CLr"
x[x == "Chart_UCLr"] <- "UCLr"
x[x == "Chart_LCLr"] <- "LCLr"
x[x == "Chart_CLmr"] <- "CLmr"
x[x == "Chart_UCLmr"] <- "UCLmr"
x[x == "Chart_LCLmr"] <- "LCLmr"
names(pCtrl) <- x
data_demo[[Chart_type]]$pCtrl <- pCtrl
pCtrl
# * Xbar-R chart ------------------------------------------------------------------------
Chart_type <- "u"
pCtrl <- data_demo[[Chart_type]]$pCtrl
x <- names(pCtrl)
x[x == "Chart_CLx"] <- "CLx"
x[x == "Chart_UCLx"] <- "UCLx"
x[x == "Chart_LCLx"] <- "LCLx"
x[x == "Chart_CLr"] <- "CLr"
x[x == "Chart_UCLr"] <- "UCLr"
x[x == "Chart_LCLr"] <- "LCLr"
x[x == "Chart_CLmr"] <- "CLmr"
x[x == "Chart_UCLmr"] <- "UCLmr"
x[x == "Chart_LCLmr"] <- "LCLmr"
names(pCtrl) <- x
data_demo[[Chart_type]]$pCtrl <- pCtrl
pCtrl
dir <- "~/SightData/R_packages/R_codes_for_test"
dir(dir)
dir <- "~/SightingData/R_packages/R_codes_for_test"
dir(dir)
save(data_demo, dir <- "~/SightingData/R_packages/R_codes_for_test")
save(data_demo, file= file.path(dir, "spcChart_data.RData"))
# * Xbar-R chart ------------------------------------------------------------------------
Chart_type <- "Xbar-R"
pCtrl <- data_demo[[Chart_type]]$pCtrl
dir <- "~/SightingData/R_packages/R_codes_for_test"
load(file= file.path(dir, "spcChart_data.RData"))
rm(data_demo)
dir <- "~/SightingData/R_packages/R_codes_for_test"
load(file= file.path(dir, "spcChart_data.RData"))
data <- data_demo[[Chart_type]]$data %>% arrange(DTime)
Chart_type <- "Xbar-R"
contrl_limits <- data_demo[[Chart_type]]$pCtrl
iu <- data_demo[[Chart_type]]$iu
df <- data %>%
select(DTime, Value, Lot, Product, Stage, Machine_id)
pCtrl <- data_demo[[Chart_type]]$pCtrl
iu <- data_demo[[Chart_type]]$iu
df <- data %>%
select(DTime, Value, Lot, Product, Stage, Machine_id)
# setting
x_var= "DTime"; y_var= "Value"; group_var= c("Lot", "Stage"); color_var= NULL;
info_var = c("Lot", "Product", "Stage", "Machine_id")
info_names = c("lot", "product", "stage", "machine id")
xlab= "time"; ylab_X= "Xbar"; ylab_R= "R"; title= ""; R_chart= TRUE
if (Chart_type %in% c("p", "np", "c", "u")) size = "Size"
# ** Test control chart
# typical
pCtrl$Chart_CLx <- 970
Xbar_R(df, x_var, y_var, info_var,  group_var, color_var, info_names, pCtrl)
# Not provide pCtrl
Xbar_R(df, x_var, y_var, info_var,  group_var, color_var, info_names)
Chart_type <- "Xbar-mR-R"
data <- data_demo[[Chart_type]]$data %>% arrange(DTime)
iu <- data_demo[[Chart_type]]$iu
pCtrl <- data_demo[[Chart_type]]$pCtrl
df <- data %>%
select(DTime, Value, Lot, Product, Stage, Machine_id)
# setting
x_var= "DTime"; y_var= "Value"; group_var= c("Lot", "Stage"); color_var= NULL;
info_var = c("Lot", "Product", "Stage", "Machine_id")
info_names = c("lot", "product", "stage", "machine id")
xlab= "time"; ylab_X= "Xbar"; ylab_mR= "mR"; ylab_R= "R"; title= ""; R_chart= TRUE
Xbar_mR_R(df, x_var, y_var, info_var,  group_var, pCtrl= NULL)
Xbar_mR_R(df, x_var, y_var, info_var,  group_var, control_limits= NULL)
Xbar_mR_R(df, x_var, y_var, info_var,  group_var, color_var, info_names,
control_limits= pCtrl, R_chart = F)
pCtrl
names(data_demo)
# * Xbar-mR-R ----
Chart_type <- "Xbar-mR-R"
pCtrl <- data_demo[[Chart_type]]$pCtrl
pCtrl
x <- names(pCtrl)
x[x == "Chart_CLx"] <- "CLx"
x[x == "Chart_UCLx"] <- "UCLx"
x[x == "Chart_LCLx"] <- "LCLx"
x[x == "Chart_CLr"] <- "CLr"
x[x == "Chart_UCLr"] <- "UCLr"
x[x == "Chart_LCLr"] <- "LCLr"
x[x == "Chart_CLmr"] <- "CLmr"
x[x == "Chart_UCLmr"] <- "UCLmr"
x[x == "Chart_LCLmr"] <- "LCLmr"
names(pCtrl) <- x
data_demo[[Chart_type]]$pCtrl <- pCtrl
save(data_demo, file= file.path(dir, "spcChart_data.RData"))
load(file= file.path(dir, "spcChart_data.RData"))
# * Xbar-mR-R ----
Chart_type <- "Xbar-mR-R"
data <- data_demo[[Chart_type]]$data %>% arrange(DTime)
iu <- data_demo[[Chart_type]]$iu
pCtrl <- data_demo[[Chart_type]]$pCtrl
pCtrl
pCtrl <- data_demo[[Chart_type]]$pCtrl
df <- data %>%
select(DTime, Value, Lot, Product, Stage, Machine_id)
# setting
x_var= "DTime"; y_var= "Value"; group_var= c("Lot", "Stage"); color_var= NULL;
info_var = c("Lot", "Product", "Stage", "Machine_id")
info_names = c("lot", "product", "stage", "machine id")
xlab= "time"; ylab_X= "Xbar"; ylab_mR= "mR"; ylab_R= "R"; title= ""; R_chart= TRUE
Xbar_mR_R(df, x_var, y_var, info_var,  group_var, control_limits= NULL)
Xbar_mR_R(df, x_var, y_var, info_var,  group_var, color_var, info_names,
control_limits= pCtrl, R_chart = F)
# X-mR
df1 <- data %>% filter(Size== 1)
info_var= NULL; info_names= NULL
X_mR(df1, x_var, y_var)
cl_X_mR(df1$value)
sd.xbar.one(df1$value)
# Xbar-s
Xbar_s(df, x_var, y_var, info_var,  group_var, color_var, info_names)
group_var
X_mR(df1, x_var, y_var)
cl_X_mR(df1$value)
sd.xbar.one(df1$value)
value= df1$Value
cl_X_mR(df1$Value)
sd.xbar.one(df1$Value)
# Xbar-s
Xbar_s(df, x_var, y_var, info_var,  group_var, color_var, info_names)
Xbar_s(df, x_var, y_var, info_var= c("Lot", "Stage"),  group_var= group_var, pCtrl= NULL)
Xbar_R(df, x_var, y_var, info_var,  group_var, color_var, info_names, pCtrl)
# setting
df <- data %>%
select(DTime, Value, Lot, Product, Stage, Machine_id)
x_var= "DTime"; y_var= "Value"; group_var= c("Lot", "Stage"); color_var= NULL;
info_var = c("Lot", "Product", "Stage", "Machine_id")
info_names = c("lot", "product", "stage", "machine id")
xlab= "time"; ylab_X= "Xbar"; ylab_R= "R"; title= ""; R_chart= TRUE
if (Chart_type %in% c("p", "np", "c", "u")) size = "Size"
# ** Test control limits .....
sample_id <- data %>% select(group_var) %>% unite("sample_id")
value <- data$Value
df1 <- data.frame(value= value, sample_id= sample_id)
da1 <- qcc.groups(df1$value, df1$sample_id)
sd.xbar(da1)
sizes <- apply(da1, 1, function(x) sum(!is.na(x)))
R <- apply(da1, 1, function(x) diff(range(x, na.rm = TRUE)))
d2 <- qcc.options("exp.R.unscaled")[sizes]
sd <- sum(R/d2)/length(sizes)
qcc(da1)
#...
cl_Xbar_R(value, sample_id)
cl_X_mR(value[1:50])
cl_Xbar_s(value, sample_id)
# ** Test control chart
# typical
pCtrl$Chart_CLx <- 970
Xbar_R(df, x_var, y_var, info_var,  group_var, color_var, info_names, pCtrl)
# ** Test control chart
# typical
pCtrl$CLx <- 970
Xbar_R(df, x_var, y_var, info_var,  group_var, color_var, info_names, pCtrl)
pCtrl
Chart_type
Chart_type <- "Xbar-R"
data <- data_demo[[Chart_type]]$data %>% arrange(DTime)
pCtrl <- data_demo[[Chart_type]]$pCtrl
iu <- data_demo[[Chart_type]]$iu
# setting
df <- data %>%
select(DTime, Value, Lot, Product, Stage, Machine_id)
x_var= "DTime"; y_var= "Value"; group_var= c("Lot", "Stage"); color_var= NULL;
info_var = c("Lot", "Product", "Stage", "Machine_id")
info_names = c("lot", "product", "stage", "machine id")
xlab= "time"; ylab_X= "Xbar"; ylab_R= "R"; title= ""; R_chart= TRUE
if (Chart_type %in% c("p", "np", "c", "u")) size = "Size"
# ** Test control chart
# typical
pCtrl$CLx <- 970
Xbar_R(df, x_var, y_var, info_var,  group_var, color_var, info_names, pCtrl)
# Xbar-s
Xbar_s(df, x_var, y_var, info_var,  group_var, color_var, info_names)
Xbar_s(df, x_var, y_var, info_var= c("Lot", "Stage"),  group_var= group_var, pCtrl= NULL)
# * p-chart/np-chart -------------------------------------------------------------------
Chart_type <- "p"
data <- data_demo[[Chart_type]]$data
iu <- data_demo[[Chart_type]]$iu
pCtrl <- data_demo[[Chart_type]]$pCtrl
# ** test cl_p
y = value = data$Value; size= data$Size
cl_p(value, size)
cl_np(value, 990)
# setting
df <- data %>%
select(Lot, Size, Value, Product, Stage, Machine_id, DTime)
x_var= "DTime"; y_var= "Value"; size_var= "Size"; color_var= NULL;
info_var= c("Lot", "Product", "Stage", "Machine_id")
info_names = c("lot", "product", "stage", "machine id");
ppm= TRUE
p_chart(df, x_var, y_var, size_var, info_var, color_var, info_names, pCtrl= NULL,
ppm = TRUE)
pCtrl
p_chart(df, x_var, y_var, size_var, info_var, color_var, info_names, center_line= pCtrl$CLx,
ppm = TRUE)
p_chart(df, x_var, y_var, size_var, info_var, color_var, info_names, center_line= NULL,
xlab= "time", np_chart= TRUE)
# * u/c chart ---------------------------------------------------------------------------
Chart_type <- "u"
data <- data_demo[[Chart_type]]$data
iu <- data_demo[[Chart_type]]$iu
pCtrl <- data_demo[[Chart_type]]$pCtrl
# ** test counting control limits
value= data$Value; size= data$Size
cl_u(value, size, iu)
cl_c(value, size)
# setting
df <- select(data, Lot, Size, Value, Product, Stage, Machine_id, DTime)
x_var= "DTime"; y_var= "Value"; size_var= "Size"; color_var= NULL;
info_var= c("Lot", "Product", "Stage", "Machine_id")
info_names = c("lot", "product", "stage", "machine id")
c_chart= FALSE; ruleVarySize= 0.1
u_chart(df, x_var, y_var, size_var, iu= 2500, info_var, xlab = "time")
u_chart(df, x_var, y_var, size_var, iu= 2500, info_var, xlab = "time", c_chart = TRUE)
pCtrl
Chart_type <- "Xbar-R"
data <- data_demo[[Chart_type]]$data %>% arrange(DTime)
pCtrl <- data_demo[[Chart_type]]$pCtrl
# setting
df <- data %>%
select(DTime, Value, Lot, Product, Stage, Machine_id)
x_var= "DTime"; y_var= "Value"; group_var= c("Lot", "Stage"); color_var= NULL;
info_var = c("Lot", "Product", "Stage", "Machine_id")
info_names = c("lot", "product", "stage", "machine id")
xlab= "time"; ylab_X= "Xbar"; ylab_R= "R"; title= ""; R_chart= TRUE
# ** Test control limits .....
df1 <- df %>% select(group_var, Value) %>% unite("sample", group_var)
da1 <- qcc.groups(df1$Value, df1$sample)
sd.xbar(da1)
stats.xbar(da1)
limits.xbar(da1)
q1 <- qcc(da1, plot = F)
q1 <- qcc(da1, type= "Xbar", plot = F)
q1 <- qcc(da1, type= "xbar", plot = F)
sd.xbar(da1)
q1[[c("center", "std.dev")]]
q1[[c("center")]]
#...
cl_Xbar_R(df1$Value, df1$sample)
q2 <- qcc(da1, type= "R", plot = F)
q2$limits
c(q1$limits[2], q1$limits[1], q2$limits[2], q2$limits[1], q1$center, q2$center, q1$std.dev)
round(c(q1$limits[2], q1$limits[1], q2$limits[2], q2$limits[1], q1$center,
q2$center, q1$std.dev), 3) ==
round(cl_Xbar_R(df1$Value, df1$sample), 3)
q3 <- qcc(da1, type= "s", plot= F)
q3 <- qcc(da1, type= "S", plot= F)
round(c(q3$limits[2], q3$limits[1], q3$center), 3) ==
round(cl_Xbar_s(df1$Value, df1$sample)[3, 4, 6, 7])
round(c(q3$limits[2], q3$limits[1], q3$center), 3) ==
round(cl_Xbar_s(df1$Value, df1$sample)[c(3, 4, 6, 7)])
round(c(q3$limits[2], q3$limits[1], q3$center), 3)
round(c(q3$limits[2], q3$limits[1], q3$center), 3) ==
round(cl_Xbar_s(df1$Value, df1$sample)[c(3, 4, 6, 7)], 3)
round(c(q3$limits[2], q3$limits[1], q3$center), 3) ==
round(cl_Xbar_s(df1$Value, df1$sample)[c(3, 4, 6)], 3)
round(c(q3$limits[2], q3$limits[1], q3$center, q3$std.dev), 3) ==
round(cl_Xbar_s(df1$Value, df1$sample)[c(3, 4, 6, 7)], 3)
round(c(q1$limits[2], q1$limits[1], q2$limits[2], q2$limits[1], q1$center,
q2$center, q2$std.dev), 3) ==
round(cl_Xbar_R(df1$Value, df1$sample), 3)
round(cl_Xbar_s(df1$Value, df1$sample)[c(3, 4, 6, 7)], 3)
# X-mR
df1 <- data %>% filter(Size== 1)
info_var= NULL; info_names= NULL
X_mR(df1, x_var, y_var)
cl_X_mR(df1$Value)
sd.xbar.one(df1$Value)
q1 <- qcc(df1$Value, type= "xbar.one", plot = F)
round(c(q1$limits[2], q1$limits[1], q1$std.dev)) == round(cl_X_mR(df1$Value)[c(1, 2, 5, 7)])
round(c(q1$limits[2], q1$limits[1], q1$center, q1$std.dev)) == round(cl_X_mR(df1$Value)[c(1, 2, 5, 7)])
library(spcChart)
library(dplyr)
library(tidyr)
library(qcc)
library(plotly)
dir <- "~/SightingData/R_packages/R_codes_for_test"
load(file= file.path(dir, "spcChart_data.RData"))
Chart_type <- "Xbar-R"
data <- data_demo[[Chart_type]]$data %>% arrange(DTime)
pCtrl <- data_demo[[Chart_type]]$pCtrl
# setting
df <- data %>%
select(DTime, Value, Lot, Product, Stage, Machine_id)
x_var= "DTime"; y_var= "Value"; group_var= c("Lot", "Stage"); color_var= NULL;
info_var = c("Lot", "Product", "Stage", "Machine_id")
info_names = c("lot", "product", "stage", "machine id")
xlab= "time"; ylab_X= "Xbar"; ylab_R= "R"; title= ""; R_chart= TRUE
# ** Test control limits .....
df1 <- df %>% select(group_var, Value) %>% unite("sample", group_var)
da1 <- qcc.groups(df1$Value, df1$sample)
q1 <- qcc(da1, type= "xbar", plot = F)
q2 <- qcc(da1, type= "R", plot = F)
q3 <- qcc(da1, type= "S", plot= F)
round(c(q1$limits[2], q1$limits[1], q2$limits[2], q2$limits[1], q1$center,
q2$center, q2$std.dev), 3) ==
round(cl_Xbar_R(df1$Value, df1$sample), 3)
round(c(q3$limits[2], q3$limits[1], q3$center, q3$std.dev), 3) ==
round(cl_Xbar_s(df1$Value, df1$sample)[c(3, 4, 6, 7)], 3)
# ** Test control chart
# typical
pCtrl$CLx <- 970
Xbar_R(df, x_var, y_var, info_var,  group_var, color_var, info_names, pCtrl)
# Not provide pCtrl
Xbar_R(df, x_var, y_var, info_var,  group_var, color_var, info_names)
# Xbar-s
Xbar_s(df, x_var, y_var, info_var,  group_var, color_var, info_names)
Xbar_s(df, x_var, y_var, info_var= c("Lot", "Stage"),  group_var= group_var, pCtrl= NULL)
Xbar_s(df, x_var, y_var, info_var= c("Lot", "Stage"),  group_var= group_var,
control_limits = NULL)
# * Xbar-mR-R ----
Chart_type <- "Xbar-mR-R"
data <- data_demo[[Chart_type]]$data %>% arrange(DTime)
iu <- data_demo[[Chart_type]]$iu
pCtrl <- data_demo[[Chart_type]]$pCtrl
df <- data %>%
select(DTime, Value, Lot, Product, Stage, Machine_id)
# setting
x_var= "DTime"; y_var= "Value"; group_var= c("Lot", "Stage"); color_var= NULL;
info_var = c("Lot", "Product", "Stage", "Machine_id")
info_names = c("lot", "product", "stage", "machine id")
xlab= "time"; ylab_X= "Xbar"; ylab_mR= "mR"; ylab_R= "R"; title= ""; R_chart= TRUE
Xbar_mR_R(df, x_var, y_var, info_var,  group_var, control_limits= NULL)
Xbar_mR_R(df, x_var, y_var, info_var,  group_var, color_var, info_names,
control_limits= pCtrl, R_chart = F)
# X-mR
df1 <- data %>% filter(Size== 1)
q1 <- qcc(df1$Value, type= "xbar.one", plot = F)
round(c(q1$limits[2], q1$limits[1], q1$center, q1$std.dev)) ==
round(cl_X_mR(df1$Value)[c(1, 2, 5, 7)])
info_var= NULL; info_names= NULL
X_mR(df1, x_var, y_var)
# * p-chart/np-chart -------------------------------------------------------------------
Chart_type <- "p"
data <- data_demo[[Chart_type]]$data
iu <- data_demo[[Chart_type]]$iu
pCtrl <- data_demo[[Chart_type]]$pCtrl
# ** test cl_p
y = value = data$Value; size= data$Size
cl_p(value, size)
cl_np(value, 990)
# setting
df <- data %>%
select(Lot, Size, Value, Product, Stage, Machine_id, DTime)
x_var= "DTime"; y_var= "Value"; size_var= "Size"; color_var= NULL;
info_var= c("Lot", "Product", "Stage", "Machine_id")
info_names = c("lot", "product", "stage", "machine id");
ppm= TRUE
p_chart(df, x_var, y_var, size_var, info_var, color_var, info_names, center_line= pCtrl$CLx,
ppm = TRUE)
p_chart(df, x_var, y_var, size_var, info_var, color_var, info_names, center_line= NULL,
xlab= "time", np_chart= TRUE)
# * u/c chart ---------------------------------------------------------------------------
Chart_type <- "u"
data <- data_demo[[Chart_type]]$data
iu <- data_demo[[Chart_type]]$iu
pCtrl <- data_demo[[Chart_type]]$pCtrl
# ** test counting control limits
value= data$Value; size= data$Size
cl_u(value, size, iu)
cl_c(value, size)
# setting
df <- select(data, Lot, Size, Value, Product, Stage, Machine_id, DTime)
x_var= "DTime"; y_var= "Value"; size_var= "Size"; color_var= NULL;
info_var= c("Lot", "Product", "Stage", "Machine_id")
info_names = c("lot", "product", "stage", "machine id")
c_chart= FALSE; ruleVarySize= 0.1
u_chart(df, x_var, y_var, size_var, iu= 2500, info_var, xlab = "time",
center_line = pCtrl$CLx)
u_chart(df, x_var, y_var, size_var, iu= 2500, info_var, xlab = "time", c_chart = TRUE)
# * Cusum chart -------------------------------------------------------------------------
Chart_type <- "Xbar-R"
data <- data_demo[[Chart_type]]$data %>% arrange(DTime)
df <- select(data, DTime, Value, Lot, Product, Stage, Machine_id)
x_var= "DTime"; y_var= "Value"; group_var= c("Lot", "Stage")
info_var= c("Lot", "Product", "Stage", "Machine_id")
info_names = c("lot", "product", "stage", "machine id")
sizes= NULL; center= NULL; stDev= NULL; decision_interval = 5; se_shift = 1;
xlab= NULL; ylab= "Cumulative Sum"; title= "Cusum Chart"
cusum_chart(df, x_var, y_var, info_var, group_var, info_names, xlab= xlab)
# EWMA
sample <- select(df, Lot, Stage, DTime) %>%
unite("sampe", Lot, Stage)  %>% arrange(DTime)
da1 <- qcc.groups(df$Value, sample$sampe)
ewma(da1)
lambda= 0.2; nsigmas= 3; xlab= "time"; ylab= "EWMA"; title= "EWMA Chart"
ewma_chart(df, x_var, y_var, info_var, group_var, info_names, xlab= xlab)
ewma_chart(df, x_var, y_var, info_var, group_var, info_names, nsigmas = 2, xlab= xlab)
library(spcChart)
library(dplyr)
library(tidyr)
library(qcc)
library(plotly)
source("./R/calculate_control_limits.R")
source("./R/spc_charts.R")
dir <- "~/OneDrive/WorkDrive/R/R_package_dev/R_codes_for_test"
load(file= file.path(dir, "spcChart_data.RData"))
# * p-chart/np-chart -------------------------------------------------------------------
Chart_type <- "p"
data <- data_demo[[Chart_type]]$data
iu <- data_demo[[Chart_type]]$iu
pCtrl <- data_demo[[Chart_type]]$pCtrl
# ** test cl_p
y = value = data$Value; size= data$Size
cl_p(value, size)
cl_np(value, 990)
sample(5, 10)
sample(10, 5)
size[sample(230, 30)] <- 880
cl_p(value, size)
# ** test cl_p
y = value = data$Value; size= data$Size
cl_p(rbinom(10, 100, 0.04), c(rep(100, 5), 90, 80,87, 56, 35))
library(spcChart)
?p_chart
